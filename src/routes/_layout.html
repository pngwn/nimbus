<script>
  import Logo from '../components/icons/Logo.html';
  import Info from '../components/Info.html';
  import { Forecast, ForecastBlock, ForecastData } from '../components/Forecast';
  import Icons from '../components/icons/index.html';

  import data from '../state/_fake-data.js';

  //import { onMount } from 'svelte';

  export let child, path;

  let options = true,
    day = 'today',
    time = 0;
  const timeKey = ['morning', 'afternoon', 'evening', 'night'];
</script>

<main>

  <Logo on:click="{() => options = !options}" {options}/>

  {#if options}
    <Info about="false"></Info>
  {/if}

  <Forecast activeDay={day} {options} activeTime={timeKey[time]}>

    {#each data[day] as block, i}
    <!--  -->
    <ForecastBlock  on:click="{(e) => time = i}"
                    time={timeKey[i]}
                    activeTime={timeKey[time]}
                    {options}>

        <ForecastData weather="{block}"
                      active="{i === time}"
                      {options}
                      time={timeKey[i]}/>

    </ForecastBlock>

    {/each}

  </Forecast>

  <Icons currentIcons={data[day][time].icons}
         activeTime={timeKey[time]}
         {options}/>

</main>

<style>

  main {
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    position: absolute;
    transition: 0.5s;
  }
  @import '../assets/styles/variables';

  /*.wrap {
  }*/


</style>
